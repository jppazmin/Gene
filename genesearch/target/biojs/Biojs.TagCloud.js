
Biojs.TagCloud=Biojs.extend({constructor:function(options){if("string"==typeof this.opt.target){this._container=jQuery('#'+this.opt.target);}else if(this.opt.target instanceof jQuery){this._container=this.opt.target;}else{this._container=jQuery(this.opt.target);}
this._container.addClass("TagCloud");this._initialize(this._container);if(this.opt.tags!=undefined){this.setTags(this.opt.tags,this.opt.cbRenderValue);}},opt:{target:"YourOwnDivId",title:undefined,tags:undefined,cbRenderValue:function(tagName,tagValueNode){return"";}},eventTypes:["onTagClicked","onTagOver"],_initialize:function(container){var opt=this.opt;if(opt.title!==undefined){this._title=jQuery('<div>'+opt.title+'</div>').appendTo(container);}
this._tags=jQuery('<ul class="tags"></ul>').appendTo(container);},setTags:function(tags,cbRenderValue){var self=this;var tagsNode=this._tags;tagsNode.children().remove();jQuery.each(tags,function(i,tag){self.addTag(tag,cbRenderValue);});},removeAll:function(){this._tags.children().remove();},addTag:function(tag,cbRenderValue){var self=this;var tagsNode=this._tags;var tagId=(tag.id)?'id="'+tag.id+'"':"";var oneTag=jQuery('<li class="tag" '+tagId+' ></li>').appendTo(tagsNode);var tagName=jQuery('<span class="name">'+tag.name.toLowerCase()+'</span>').appendTo(oneTag);var tagValue=jQuery('<span class="value" style="display:none"></span>').appendTo(oneTag);if(cbRenderValue===undefined||"function"!=typeof cbRenderValue){cbRenderValue=function(tagId,tagName,tagValueNode){return"";}}
tagName.css({"fontSize":(tag.freq/10<1)?tag.freq/10+1+"em":(tag.freq/10>2)?"2em":tag.freq/10+"em","cursor":'pointer'}).click(function(){tagsNode.find('.value:visible').hide();tagValue.html(cbRenderValue.call(oneTag,tag.id,tag.name,tagValue));tagValue.show(1000);tagsNode.find('.name.active').removeClass('active');tagName.addClass('active');self.raiseEvent(Biojs.TagCloud.EVT_ON_TAG_CLICKED,{tagName:tag.name});}).mouseover(function(){self.raiseEvent(Biojs.TagCloud.EVT_ON_TAG_OVER,{'tagName':tag.name,'tagId':tag.id,'tagValue':tagValue})}).append('<span style="vertical-align:super; font-size:10px;">'+tag.freq+'</super>');if(tag.color){tagName.css('color',tag.color);}}},{EVT_ON_TAG_CLICKED:"onTagClicked",EVT_ON_TAG_OVER:"onTagOver"});